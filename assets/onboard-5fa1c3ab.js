import{r as n,u as C,j as s,c as P,H as A}from"./index-705adf14.js";import{M as w}from"./index-724d10e2.js";import{A as p}from"./index.esm-88c88f87.js";import{o as S,m as b,c as k,a as I,s as K,d as j,w as R,l as Z}from"./firebase-0a7cd728.js";function _(){const[v,m]=n.useState(!1),[y,f]=n.useState(!1),[t,l]=n.useState({}),[a,x]=n.useState("");n.useState("");const[o,g]=n.useState(""),[F,d]=n.useState(!1);let h=null;n.useEffect(()=>(console.log("listening"),h=S(I,e=>{if(e!==null){const r=e.uid,c=b(j,"users",r);k(c).then(u=>{console.log(u.exists(),"exist"),u.exists&&window.location.replace("index.html"),chrome.storage.local.set({uid:r})})}}),h()),[]),C();const i=e=>{console.log("validating"),e.target.name==="email"&&(console.log("validating email"),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.target.value)||l({email:"Invalid email address"}),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.target.value)&&l({email:""})),e.target.name==="password"&&(console.log("validating password"),e.target.value.length<=6&&(console.log("top"),l({password:"Password is too short"})),e.target.value.length>=6&&(console.log("bottom"),l({password:"Password strength is good"})))},N=async()=>{if(a===""&&o==="")return l({email:"Email field is required",password:"Password field is required"});d(!0);try{const e=await K(a,o);console.log(e,"cred");const r=e.user;console.log(r,"user");const c=r.uid;console.log(c,"uid");const u=b(j,"users",c);console.log(u,"ref");const q=await R(u,{email:a});c.length>0&&window.location.replace("index.html")}catch(e){if(console.log(e),d(!1),e.message==="Firebase: Error (auth/invalid-email).")return l({firebase:"Invalid email"});if(e.message==="Firebase: Error (auth/internal-error).")return l({firebase:"Poor internet connection"})}d(!1)};console.log(a,"email"),console.log(o,"ppp");const E=async()=>{if(a===""&&o==="")return l({email:"Email field is required",password:"Password field is required"});d(!0);try{const e=await Z(a,o),r=e==null?void 0:e.user;console.log(r,"user"),r.uid.length>0&&window.location.replace("index.html")}catch(e){if(console.log(e),d(!1),e.message==="Firebase: Error (auth/missing-email).")return l({firebase:"Invalid email"});if(e.message==="Firebase: Error (auth/internal-error).")return l({firebase:"Poor internet connection"})}};return console.log(t,"error"),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sm:w-full w-72 flex justify-center  realtive",style:{height:"600px"},children:s.jsxs("div",{className:"lg:w-1/2 w-full  px-4 flex flex-col justify-center items-center space-y-10",children:[s.jsxs("main",{className:"flex flex-col items-center",children:[s.jsx("img",{src:"https://d39xvdj9d5ntm1.cloudfront.net/alarm-app/images/device_doorbell_two_2d_sm-4d5a36554dc1ee80cfcacd93143ab314.png",className:"w-20 h-20"}),s.jsx("h5",{className:"text-3xl text-slate-500",children:"Cams"})]}),s.jsxs("main",{className:"flex flex-col w-full space-y-3",children:[s.jsx("button",{className:"bg-blue-500 rounded-full text-white py-2",onClick:()=>m(!0),children:"Login"}),s.jsx("h5",{className:"text-center w-full text-slate-500 font-light",children:"OR"}),s.jsx("button",{className:"border-blue-500 border rounded-full text-blue-500 py-2",onClick:()=>f(!0),children:"Create an account"})]})]})}),s.jsxs(w,{trigger:v,cname:" lg:w-1/2 w-11/12 rounded-sm py-4  px-4",children:[s.jsxs("main",{className:"flex justify-center space-x-12 w-full",children:[s.jsx("h5",{className:"text-slate-500 text-lg ",children:"Login"}),s.jsx("button",{onClick:()=>m(!1),children:s.jsx(p,{className:"text-md font-thin text-slate-500"})})]}),s.jsxs("main",{className:"flex flex-col space-y-4 w-full py-6",children:[s.jsx("input",{className:"border-b w-full outline-none hover:border-blue-500",placeholder:"Email",name:"email",value:a,onChange:e=>x(e.target.value),onKeyPress:e=>i(e),onKeyDown:e=>i(e)}),t.email?s.jsx("h5",{className:"text-sm w-full items-start flex text-red-700 font-light",children:t.email}):null,s.jsx("input",{className:"border-b w-full outline-none hover:border-blue-500",placeholder:"Password",onChange:e=>g(e.target.value),name:"password",value:o,onKeyPress:e=>i(e)}),t.password?s.jsx("h5",{className:"text-sm w-full items-start flex text-red-700 font-light",children:t.password}):null,s.jsx("div",{className:"w-full",children:s.jsx("button",{className:"bg-blue-500 rounded-full text-white py-2 w-full ",onClick:E,children:"Login"})})]})]}),s.jsxs(w,{trigger:y,cname:" lg:w-1/2 w-11/12 rounded-sm py-4  px-4",children:[s.jsxs("main",{className:"flex justify-center space-x-12 w-full",children:[s.jsx("h5",{className:"text-slate-500 text-lg ",children:"Sign in"}),s.jsx("button",{onClick:()=>f(!1),children:s.jsx(p,{className:"text-md font-thin text-slate-500"})})]}),s.jsxs("main",{className:"flex flex-col space-y-4 w-full py-6",children:[s.jsx("input",{className:"border-b w-full outline-none hover:border-blue-500",placeholder:"Email",name:"email",value:a,onChange:e=>x(e.target.value),onKeyPress:e=>i(e),onKeyDown:e=>i(e)}),t.email?s.jsx("h5",{className:"text-sm w-full items-start flex text-red-700 font-light",children:t.email}):null,s.jsx("input",{className:"border-b w-full outline-none hover:border-blue-500",placeholder:"Password",onChange:e=>g(e.target.value),name:"password",value:o,onKeyPress:e=>i(e)}),t.password?s.jsx("h5",{className:"text-sm w-full items-start flex text-red-700 font-light",children:t.password}):null,s.jsx("div",{className:"w-full",children:s.jsx("button",{className:"bg-blue-500 rounded-full text-white py-2 w-full ",onClick:N,children:"Sign in"})})]})]})]})}P.createRoot(document.getElementById("root")).render(s.jsx(A,{children:s.jsx(_,{})}));
